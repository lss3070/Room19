---
title: "[React] React 18ë²„ì „ì—ì„œì˜ ë°”ë€ì "
subtitle: "React"
layout: post
auther: "Hux"
header-style: text
catalog: true
tags:
    Javascript
    HeadlessBrowser
---


ì•ˆë…•í•˜ì„¸ìš” ì–´ì œë¶€ë¡œ ë¦¬ì•¡íŠ¸ 18ë²„ì „ì´ ì •ì‹ ë²„ì „ìœ¼ë¡œ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤.ğŸ‘ğŸ‘ğŸ‘
React 18ë²„ì „ì—ì„œ ì–´ë–¤ê²Œ ë°”ë€Œì—ˆëŠ”ì§€ ì–´ë–¤ ê¸°ëŠ¥ì´ ìƒˆë¡œ ìƒê²¼ëŠ”ì§€ ì•Œì•„ë³´ì£ !!


//ì´ˆì•ˆ ë¦¬ìŠ¤íŠ¸
1. automatic batching for fewer renders

- ì´ì œ settimeoutì´ë‚˜ promiseë‚´ì—ì„œë„ reactì˜ ë¹„ë™ê¸° hookì„ ì´ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 
- settimeout ì´ë‚˜ promise í•¨ìˆ˜ê°™ì€ ê²½ìš° setstateì—ì„œë„ ì²˜ë¦¬ë¨.
ê¸°ì¡´ì— settimeoutì•ˆì—ì„œì˜ useStateëŠ” í˜¸ì¶œë˜ì—ˆë˜ ìƒíƒœë§Œ ë¶ˆëŸ¬ë¡œì˜¤ê³  ì¤‘ê°„ì— ê°’ì´ ë°”ë€Œë©´ ë°˜ì˜ì´ ë˜ì§€ ì•Šì•˜ì§€ë§Œ 18ë²„ì „ì—ì„œëŠ” ë°”ë€Œê²Œ ë˜ì—ˆë‹¤.
- ë™ê¸°ì‹ìœ¼ë¡œ ì²˜ë¦¬ë¥¼ ì›í•˜ëŠ” ê²½ìš°ì—ëŠ” flushSyncì„ ì´ìš©í•˜ì—¬ ì²˜ë¦¬í•´ ì£¼ë©´ ë©ë‹ˆë‹¤.

2. ssr support for suspense ëª¨ë“œsus
suspenseëŠ”

ë‚˜ìœ ì˜ˆì‹œ
* íŠ¹ì • ë°ì´í„° fetchì— ëŒ€í•œ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤.
* suspenseëŠ” ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‘ì—…ê³¼ ë·°ë ˆì´ì–´ë¥¼ ê²°í•©í•´ ì£¼ì§€ ì•ŠëŠ”ë‹¤.
UI ìƒì—ì„œ ë¡œë”©ìƒíƒœë¥¼ í‘œì‹œ í•  ìˆ˜ ìˆë„ë¡ ì¡°ì •í•˜ëŠ” ê²ƒì„ ë•ì§€ë§Œ ì´ëŠ” ë„¤íŠ¸ì›Œí¬ ë¡œì§ì„ reactì— ì¢…ì† ì‹œí‚¤ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

ìœ ìš©í•œ ì˜ˆì‹œ
* ë°ì´í„° fetchë¼ì´ë¸ŒëŸ¬ë¦¬
---
* ì˜ë„ì ìœ¼ë¡œ ì„¤ê³„ëœ ë¡œë”©ìƒíƒœ
---
* ê²½ìŸìƒíƒœ(race condition)ì„ í”¼í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.
---
ê²½ìŸì‚°íƒœë€ ë¬´ì—‡ì¸ê°€?
ìœ„í‚¤ë°±ê³¼ì— ë”°ë¥´ë©´ `ê³µìœ  ìì›ì— ëŒ€í•´ ì—¬ëŸ¬ê°œì˜ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ì ‘ê·¼ì„ ì‹œë„ í•  ë•Œ ì ‘ê·¼ì˜ íƒ€ì´ë°ì´ë‚˜ ìˆœì„œ ë“±ì´ ê²°ê³¼ê°’ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆëŠ” ìƒíƒœ`ì´ë¼ê³  ë‚˜ì™€ìˆë‹¤.



ì˜ˆì‹œ1. ë Œë”ë§ ì§í›„ ë¶ˆëŸ¬ì˜¤ê¸°
ë Œë”ë§ ì§í›„ ë¶ˆëŸ¬ì˜¤ê¸°(Suspense ë¯¸ì‚¬ìš©)
```

```
ë¶ˆëŸ¬ì˜¤ê¸° ì´í›„ ë Œë”ë§(Suspense ë¯¸ì‚¬ìš©)

ë¶ˆëŸ¬ì˜¬ ë•Œ ë Œë”ë§(Suspense ì‚¬ìš©)



suspenseëŠ” data fecthing ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì›Œí„°í´ í˜„ìƒì„ ë§‰ì•„ì¤€ë‹¤.


ê³µì‹ë¬¸ì„œ ì°¸ì¡°..
8. concurrent ëª¨ë“œ

í•„í„°ë§ì„ ì´ìš©í•œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ë§Œë“ ë‹¤ê³  ìƒê°í•˜ë©´ ë””ë°”ìš´ì‹±ì´ë‚˜ ìŠ¤ë¡œí‹€ì„ ì´ìš©í•˜ì—¬
íŠ¹ì • ìµœëŒ€ ë¹ˆë„ìˆ˜ë¡œ ì—…ë°ì´íŠ¸ë¥¼í•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ íƒ€ì´í•‘ì„ ë©ˆì¶”ê³  ë‚˜ì„œë§Œ ëª©ë¡ì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì„±ëŠ¥ì´ ì•ˆì¢‹ì€ ê³³ì—ì„œëŠ” ì—¬ì „íˆ ë²„ë²…ê±°ë¦´ ê²ƒì´ë©° ë””ë°”ìš´ì‹±ì´ë‚˜ ìŠ¤ë¡œí‹€ë§ì´ ìµœì ì˜ ë°©ì‹ì€ ì•„ë‹™ë‹ˆë‹¤.
(ë²„ë²…ê±°ë¦¬ëŠ” ì´ìœ ëŠ” ë Œë”ë§ì´ ì‹œì‘ë˜ê²Œ ë˜ë©´ ì¤‘ê°„ì— ì¤‘ë‹¨ì„ í•  ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)

concurrentëª¨ë“œëŠ” ë Œë”ë§ì„ ì¸í„°ëŸ½íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“¬ìœ¼ë¡œì¨ ì‚¬ìš©ìê°€ ë‹¤ë¥¸í‚¤ë¥¼ ëˆ„ë¥¼ë•Œ ReactëŠ” ë¸Œë¼ìš°ì € í…ìŠ¤íŠ¸ ì…ë ¥ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ”ê²ƒì„ ì°¨ë‹¨í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.


ê²°ê³¼ì ìœ¼ë¡  reactë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì€ ì´ì „ê³¼ ë˜‘ê°™ìŠµë‹ˆë‹¤.propë° stateì™€ ê°™ì€ ê°œë…ì€ ê·¼ë³µì ìœ¼ë¡œ ë™ì¼í•˜ê²Œ ì‘ë™ì´ ë˜ë©° reactëŠ” íœ´ë¦¬ìŠ¤í‹±ì„ ì‚¬ìš©í•˜ì—¬ ì—…ë°ì´íŠ¸ì˜ ê¸‰í•¨ ì •ë„ë§Œ ê²°ì •í•˜ê³  ëª‡ì¤„ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ ì‚¬ìš©ìê°€ ëª¨ë“  ìƒí˜¸ì‘ìš©ì— ëŒ€í•´ ì›í•˜ëŠ” ì‚¬ìš©ìì˜ ê²½í—˜ì„ ì–»ì„ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

ë™ì‹œì„±
---

ì‚¬ìš©ë˜ëŠ”ê²ƒ useTransition()í›…

ë¦¬ì•¡íŠ¸ëŠ” uië Œë”ë§ ë„ì¤‘ ë Œë”ë§ ì´ì™¸ì˜ ëª¨ë“  ì‘ì—…ì„ ì°¨ë‹¨í•œë‹¤.

ëŒ€ë¶€ë¶„ì˜ ê°œë°œìë“¤ì´ ë©”ëª¨ì´ì œì´ì…˜ì´ë‚˜ ë””ë°”ìš´ì‹±ì˜ ê¸°ë²•ì„ ì‚¬ìš©í•´ì„œ ì‚¬ìš©ìì˜ ê²½í—˜ì„ ê°œì„ ì‹œí‚¤ê³ ì í•˜ê² ì§€ë§Œ, ì´ëŠ” ì£¼ëœ ë¬¸ì œí•´ê²°ì„ ë’¤ë¡œ ë¯¸ë¤„ë‘ëŠ” ê²ƒì¼ ë¿ì…ë‹ˆë‹¤. ë Œë”ë§ì€ ì—¬ì „íˆ ê¸¸ì„ ê°€ë¡œë§‰ëŠ” í° íŠ¸ëŸ­ê³¼ ê°™ì€ ì¡´ì¬ì…ë‹ˆë‹¤.

ë™ì‹œì„±ì´ë€ ê²°êµ­ ì—¬ëŸ¬ ì‘ì—…ë“¤ì„ ì²˜ë¦¬ í•  ìˆ˜ ìˆë„ë¡ ì‘ì—…ë“¤ì„ ì‘ì€ ì¡°ê°ë“¤ë¡œ ë‚˜ëˆ„ëŠ” ë°©ë²•ì´ê³  reactì—ì„œ ì´ì œ í•˜ë ¤ê³  í•˜ëŠ”ê²ƒ.
ì¦‰ ë Œë”ë§ ê³¼ì •ì„ ë” ì‘ì€ ì‘ì—…ë“¤ë¡œ ë‚˜ëˆ„ê³  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•´ì„œ ê° ì‘ì—…ë“¤ì— ì¤‘ìš”ë„ì— ë”°ë¥¸ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•©ë‹ˆë‹¤.(Time-slicing)ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ì´ë ‡ê²Œí•˜ë©´ concurrent reactê°€ ì•„ë˜ê²ƒë“¤ì„ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
* ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡í•˜ì§€ ì•ŠëŠ”ë‹¤.
* ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ë“¤ì„ ì²˜ë¦¬í•˜ê³  ìš°ì„  ìˆœìœ„ì— ë”°ë¼ ê° ì‘ì—…ë“¤ ê°„ì— ì „í™˜í•  ìˆ˜ ìˆë‹¤.
* ìµœì¢… ê²°ê³¼ë¡œ í™•ì •í•˜ì§€ ì•Šê³ ë„ ë¶€ë¶„ì ìœ¼ë¡œ íŠ¸ë¦¬ë¥¼ ë Œë”ë§ í•  ìˆ˜ ìˆë‹¤.


ìƒˆë¡œìš´ hook ê¸°ëŠ¥

1. useTransition
(suspenseì™€ í•¨ê»˜ ëœì¤‘ìš”í•œ ìƒíƒœì˜ ì—…ë°ì´íŠ¸ë¥¼ ëŠ¦ì¶”ëŠ” ê²ƒì´ ê°€ëŠ¥.)



2. useDeferredValue

3. useId
- serverì—ì„œ ìƒì„±í•œ react treeì™€ clientì—ì„œ ê·¸ë¦° react treetkdldp hydrationì´ ì›í• í•˜ê²Œ í•  ìˆ˜ ìˆë„ë¡ ì¼ê´€ì ì¸ idê°€ ìƒì„±ëœë‹¤.

*hydrationì´ë€? ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì •ì ì¸ htmlì´ stateë¡œ ë™ì ì¸ ìƒíƒœë³€í™”ë¥¼ ë„£ì–´ì£¼ëŠ” ì‘ì—…
CSRì¼ ê²½ìš°ì—ëŠ” ìƒê´€ì´ ì—†ì§€ë§Œ SSRì¸ ê²½ìš°ì—ëŠ” ì‚¬ìš©ì„ ê³ ë ¤í•´ì•¼í•œë‹¤.
Rehydrationì„ ê²€ìƒ‰!!

4. useInsertionEffect
- reactì˜ ì»´í¬ë„ŒíŠ¸ê°€ ê·¸ë ¤ì§€ëŠ” ìˆœì„œë¥¼ ë³´ë©´ render -> useLayoutEffect-> commit -> useEffect

ì¼ë°˜ì ìœ¼ë¡œ useLayoutEffectëŠ” 
ë¥¼ ì‚¬ìš©í•  ë•Œ refì— ëŒ€í•œ ì ‘ê·¼ì„ í•  ìˆ˜ê°€ ì—†ë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ reactë¥¼ ê°œë°œí•  ë•Œ css libraryë¥¼ ê°œë°œí•˜ì§€ ì•ŠëŠ” í•œ ì´ hookì„ ì“¸ í•„ìš”ëŠ” ì—†ë‹¤ê³  í•œë‹¤.

5. useSyncExternalStore

- reactì—ì„  internalSourceëŠ” props,state,contextê°™ì€ ê²ƒì´ ìˆë‹¤.



